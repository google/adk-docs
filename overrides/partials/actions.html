{% if page.edit_url and page.file.src_path != "index.md" %}
  {% if "content.action.edit" in features %}
    <a href="{{ page.edit_url }}" title="Edit this page on GitHub" class="md-content__button md-icon" rel="edit">
      {% set icon = config.theme.icon.edit or "material/file-edit-outline" %}
      {% include ".icons/" ~ icon ~ ".svg" %}
    </a>
  {% endif %}
  {% if "content.action.view" in features %}
    {% if "/blob/" in page.edit_url %}
      {% set part = "blob" %}
    {% else %}
      {% set part = "edit" %}
    {% endif %}
    <a href="{{ page.edit_url | replace(part, 'raw') }}" title="View Markdown source" class="md-content__button md-icon">
      {% set icon = config.theme.icon.view or "material/file-eye-outline" %}
      {% include ".icons/" ~ icon ~ ".svg" %}
    </a>
  {% endif %}
  {% set raw_url = page.edit_url | replace("github.com", "raw.githubusercontent.com") | replace("/edit/", "/") %}
  <button class="md-content__button md-icon" title="Copy page as Markdown" onclick="var b=this,s=b.querySelector('svg'),o=s.innerHTML;fetch('{{ raw_url }}').then(r=>r.text()).then(t=>{navigator.clipboard.writeText(t);s.innerHTML='<path d=\'M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\'/>';setTimeout(()=>s.innerHTML=o,1500)}).catch(()=>alert('Copy failed'))">
    {% include ".icons/material/content-copy.svg" %}
  </button>
{% endif %}
